file_client: local
master_type: disable
root_dir: <%= config[:root_path] %>

mine_functions:
  network.interfaces: []
  network.ip_addrs: []

use_superseded:
  - module.run

file_recv: True

gitfs_provider: pygit2
gitfs_saltenv_whitelist:
  - base
  - dev
  - server

fileserver_backend:
  - roots
  - git


file_roots:
  base:
    - <%= os_join(config[:root_path], 'srv', 'salt', 'base') %>
    - <%= os_join(config[:root_path], 'srv', 'reactor') %>
  dev:
    - <%= os_join(config[:root_path], 'srv', 'salt', 'dev') %>
    - <%= os_join(config[:root_path], 'srv', 'salt', 'base') %>
    - <%= os_join(config[:root_path], 'srv', 'reactor') %>
  server:
    - <%= os_join(config[:root_path], 'srv', 'salt', 'server') %>
    - <%= os_join(config[:root_path], 'srv', 'salt', 'dev') %>
    - <%= os_join(config[:root_path], 'srv', 'salt', 'base') %>
    - <%= os_join(config[:root_path], 'srv', 'reactor') %>

pillar_roots:
  <%= config[:salt_env] %>:
  - <%= os_join(config[:root_path], config[:salt_pillar_root]) %>
  - <%= os_join(config[:root_path], config[:salt_spm_root], 'pillar') %>

ext_pillar_first: True

<% if windows_os? %>
file_client: local
winrepo_dir: <%= os_join(config[:root_path], config[:salt_file_root], 'win', 'repo') %>
winrepo_dir_ng: <%= os_join(config[:root_path], config[:salt_file_root], 'win', 'repo-ng') %>
<% end %>
