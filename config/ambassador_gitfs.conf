ext_pillar:
  - git:
    - https://github.com/kiemlicz/envoy.git:
      - env: custom
      - root: pillar
  - puppet: /usr/bin/foreman-node
  - cmd_json: cat /var/cache/salt/master/file_ext/%s/gdrive_token
  - privgit:
    - main:
        env: custom
        root: pillar

#this is the only one setup of multiple gitfs roots mapped under possibly same saltenvs that works
#the base must have been treated specially...

gitfs_saltenv:
  - base:
    - mountpoint: salt://base
    - ref: master
    - root: salt/base

gitfs_remotes:
  - https://github.com/kiemlicz/envoy.git:
    - name: add_base
    - saltenv:
      - gui:
        - ref: master
        - root: salt/base
        - mountpoint: salt://gui
      - dev:
        - ref: master
        - root: salt/base
        - mountpoint: salt://dev
  - https://github.com/kiemlicz/envoy.git:
    - name: add_gui
    - saltenv:
      - gui:
        - ref: master
        - root: salt/gui
        - mountpoint: salt://gui
      - dev:
        - ref: master
        - root: salt/gui
        - mountpoint: salt://dev
  - https://github.com/kiemlicz/envoy.git:
    - name: add_dev
    - saltenv:
      - dev:
        - ref: master
        - root: salt/dev
        - mountpoint: salt://dev
